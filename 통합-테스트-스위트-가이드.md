# í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#ê°œìš”)
2. [í´ë” êµ¬ì¡°](#í´ë”-êµ¬ì¡°)
3. [í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ì„¤ì •](#í…ŒìŠ¤íŠ¸-ìŠ¤ìœ„íŠ¸-ì„¤ì •)
4. [í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ](#í…ŒìŠ¤íŠ¸-ì‘ì„±-ê°€ì´ë“œ)
5. [í…ŒìŠ¤íŠ¸ ì‹¤í–‰](#í…ŒìŠ¤íŠ¸-ì‹¤í–‰)
6. [í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê´€ë¦¬](#í…ŒìŠ¤íŠ¸-ì»¤ë²„ë¦¬ì§€-ê´€ë¦¬)
7. [CI/CD ì—°ë™](#cicd-ì—°ë™)
8. [ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤](#ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤)
9. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ê°œìš”

### ëª©ì 
Store í”„ë¡œì íŠ¸ì˜ ëª¨ë“  E2E í…ŒìŠ¤íŠ¸ë¥¼ í†µí•© ê´€ë¦¬í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ë¥¼ ëˆ„ì í•˜ê³ , ì „ì²´ ê¸°ëŠ¥ì— ëŒ€í•œ ë¦¬ê·¸ë ˆì…˜ í…ŒìŠ¤íŠ¸ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### PRë³„ í…ŒìŠ¤íŠ¸ì™€ì˜ ê´€ê³„
| êµ¬ë¶„ | PR ë¦¬ê·¸ë ˆì…˜ í…ŒìŠ¤íŠ¸ | í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ |
|------|-------------------|-------------------|
| **ëª©ì ** | PR ë³€ê²½ì‚¬í•­ ê²€ì¦ | ì „ì²´ ê¸°ëŠ¥ ë¦¬ê·¸ë ˆì…˜ |
| **ì‹¤í–‰ ì‹œì ** | PR ì˜¬ë¼ì˜¬ ë•Œë§ˆë‹¤ | ì–¸ì œë“ ì§€ (ë°°í¬ ì „, ì •ê¸°ì ìœ¼ë¡œ) |
| **PR í•„ìš”** | O (PR ë¶„ì„, ì½”ë©˜íŠ¸) | X (ë…ë¦½ ì‹¤í–‰) |
| **í…ŒìŠ¤íŠ¸ ë²”ìœ„** | PR ê´€ë ¨ ê¸°ëŠ¥ë§Œ | ì „ì²´ ê¸°ëŠ¥ |
| **ì°¸ê³  ë¬¸ì„œ** | [PR-ë¦¬ê·¸ë ˆì…˜-í…ŒìŠ¤íŠ¸-ì›Œí¬í”Œë¡œìš°.md](./PR-ë¦¬ê·¸ë ˆì…˜-í…ŒìŠ¤íŠ¸-ì›Œí¬í”Œë¡œìš°.md) | ì´ ë¬¸ì„œ |

### ì›Œí¬í”Œë¡œìš°
```
PR í…ŒìŠ¤íŠ¸ ì‘ì„± â†’ ê²€ì¦ ì™„ë£Œ â†’ í†µí•© ìŠ¤ìœ„íŠ¸ì— ë³‘í•© â†’ ì»¤ë²„ë¦¬ì§€ ëˆ„ì 
                                    â†“
                         ì–¸ì œë“ ì§€ ì „ì²´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
```

---

## í´ë” êµ¬ì¡°

```
regression-tests/
â”œâ”€â”€ playwright-tests/               # í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ (ëˆ„ì )
â”‚   â”œâ”€â”€ tests/                      # í…ŒìŠ¤íŠ¸ íŒŒì¼ (ê¸°ëŠ¥ë³„ ë¶„ë¥˜)
â”‚   â”‚   â”œâ”€â”€ auth/                   # ì¸ì¦ ê´€ë ¨ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ login.spec.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ signup.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ jwt-token.spec.ts
â”‚   â”‚   â”œâ”€â”€ cart/                   # ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ cart-api.spec.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ cart-ui.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ cart-quantity.spec.ts
â”‚   â”‚   â”œâ”€â”€ order/                  # ì£¼ë¬¸ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ order-create.spec.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ order-cancel.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ order-history.spec.ts
â”‚   â”‚   â”œâ”€â”€ product/                # ìƒí’ˆ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ product-list.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ product-detail.spec.ts
â”‚   â”‚   â”œâ”€â”€ coupon/                 # ì¿ í° í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ coupon-apply.spec.ts
â”‚   â”‚   â”‚   â””â”€â”€ coupon-discount.spec.ts
â”‚   â”‚   â””â”€â”€ common/                 # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”‚       â”œâ”€â”€ fixtures.ts         # í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜
â”‚   â”‚       â”œâ”€â”€ helpers.ts          # í—¬í¼ í•¨ìˆ˜
â”‚   â”‚       â””â”€â”€ constants.ts        # ìƒìˆ˜ ì •ì˜
â”‚   â”œâ”€â”€ playwright.config.ts        # Playwright ì„¤ì •
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ README.md                   # í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ì„¤ëª…
â”‚
â”œâ”€â”€ pr-results/                     # PRë³„ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë³´ê´€
â”‚   â”œâ”€â”€ ì¥ë°”êµ¬ë‹ˆ-ë¦¬íŒ©í† ë§/
â”‚   â”‚   â”œâ”€â”€ PR-ë¶„ì„.md
â”‚   â”‚   â”œâ”€â”€ í…ŒìŠ¤íŠ¸-ê²°ê³¼.md
â”‚   â”‚   â”œâ”€â”€ pr-comment.md
â”‚   â”‚   â””â”€â”€ screenshots/
â”‚   â”œâ”€â”€ íšŒì›ê°€ì…-ê¸°ëŠ¥-ì¶”ê°€/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ coverage-reports/               # ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ ë³´ê´€
    â”œâ”€â”€ 2026-01-09/
    â”‚   â”œâ”€â”€ report.html
    â”‚   â””â”€â”€ summary.json
    â””â”€â”€ latest/
```

### í´ë” ì„¤ëª…
| í´ë” | ì„¤ëª… |
|------|------|
| `playwright-tests/` | ëª¨ë“  E2E í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ëˆ„ì ë˜ëŠ” í†µí•© ìŠ¤ìœ„íŠ¸ |
| `playwright-tests/tests/` | ê¸°ëŠ¥ë³„ë¡œ ë¶„ë¥˜ëœ í…ŒìŠ¤íŠ¸ íŒŒì¼ |
| `playwright-tests/tests/common/` | í…ŒìŠ¤íŠ¸ ê°„ ê³µìœ ë˜ëŠ” ìœ í‹¸ë¦¬í‹° |
| `pr-results/` | PRë³„ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¬¸ì„œ ë° ìŠ¤í¬ë¦°ìƒ· |
| `coverage-reports/` | ì •ê¸°ì ì¸ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê²°ê³¼ |

---

## í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ì„¤ì •

### ì´ˆê¸° ì„¤ì •

```bash
cd regression-tests/playwright-tests

# íŒ¨í‚¤ì§€ ì´ˆê¸°í™”
npm init -y

# Playwright ì„¤ì¹˜
npm install -D @playwright/test typescript @types/node

# ë¸Œë¼ìš°ì € ì„¤ì¹˜
npx playwright install
```

### playwright.config.ts

```typescript
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './tests',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: [
    ['html', { outputFolder: '../coverage-reports/latest' }],
    ['json', { outputFile: '../coverage-reports/latest/results.json' }],
    ['list']
  ],
  timeout: 60000,
  expect: {
    timeout: 10000
  },
  use: {
    baseURL: process.env.API_URL || 'http://localhost:8080',
    trace: 'on-first-retry',
    screenshot: 'on',
    video: 'retain-on-failure',
    headless: process.env.CI ? true : false,
  },

  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
  ],
});
```

### package.json scripts

```json
{
  "name": "store-e2e-tests",
  "scripts": {
    "test": "playwright test --headed",
    "test:headless": "playwright test",
    "test:ci": "playwright test --reporter=html,json",
    "test:auth": "playwright test tests/auth/",
    "test:cart": "playwright test tests/cart/",
    "test:order": "playwright test tests/order/",
    "test:product": "playwright test tests/product/",
    "test:coupon": "playwright test tests/coupon/",
    "test:smoke": "playwright test --grep @smoke",
    "test:regression": "playwright test --grep @regression",
    "test:ui": "playwright test --ui",
    "report": "playwright show-report ../coverage-reports/latest"
  }
}
```

---

## í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### íŒŒì¼ ëª…ëª… ê·œì¹™
- `{ê¸°ëŠ¥}-{ì„¸ë¶€ê¸°ëŠ¥}.spec.ts` í˜•ì‹
- ì˜ˆ: `cart-api.spec.ts`, `order-create.spec.ts`

### í…ŒìŠ¤íŠ¸ íƒœê·¸ ì‚¬ìš©

í…ŒìŠ¤íŠ¸ì— íƒœê·¸ë¥¼ ë¶™ì—¬ ì„ íƒì  ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë„ë¡ í•©ë‹ˆë‹¤:

```typescript
import { test, expect } from '@playwright/test';

// Smoke í…ŒìŠ¤íŠ¸ (ë¹ ë¥¸ ê²€ì¦ìš©)
test('@smoke ë¡œê·¸ì¸ ê¸°ë³¸ ë™ì‘ í™•ì¸', async ({ page }) => {
  // ...
});

// Regression í…ŒìŠ¤íŠ¸ (ì „ì²´ ê²€ì¦ìš©)
test('@regression ë¡œê·¸ì¸ í›„ í† í° ì €ì¥ í™•ì¸', async ({ page }) => {
  // ...
});

// íŠ¹ì • PR ê´€ë ¨ í…ŒìŠ¤íŠ¸
test('@pr-123 ì¥ë°”êµ¬ë‹ˆ ìˆ˜ëŸ‰ ë³€ê²½ í…ŒìŠ¤íŠ¸', async ({ page }) => {
  // ...
});
```

### ê³µí†µ ìœ í‹¸ë¦¬í‹° í™œìš©

**tests/common/fixtures.ts**:
```typescript
import { test as base, expect } from '@playwright/test';

// í…ŒìŠ¤íŠ¸ ê³„ì • ì •ë³´
export const TEST_USER = {
  username: 'test2345',
  password: 'Qwpo1209!@'
};

// API Base URL
export const API_BASE_URL = process.env.API_URL || 'http://localhost:8080';
export const FRONTEND_URL = process.env.FRONTEND_URL || 'http://localhost:3000';

// ì¸ì¦ëœ í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜
type AuthFixture = {
  authToken: string;
};

export const test = base.extend<AuthFixture>({
  authToken: async ({ request }, use) => {
    const response = await request.post(`${API_BASE_URL}/members/sign-in`, {
      data: {
        username: TEST_USER.username,
        password: TEST_USER.password
      }
    });
    const data = await response.json();
    await use(data.accessToken);
  }
});

export { expect };
```

**tests/common/helpers.ts**:
```typescript
import { Page, APIRequestContext } from '@playwright/test';
import { API_BASE_URL, TEST_USER } from './fixtures';

// ë¡œê·¸ì¸ í—¬í¼
export async function login(request: APIRequestContext): Promise<string> {
  const response = await request.post(`${API_BASE_URL}/members/sign-in`, {
    data: {
      username: TEST_USER.username,
      password: TEST_USER.password
    }
  });
  const data = await response.json();
  return data.accessToken;
}

// ì¸ì¦ í—¤ë” ìƒì„±
export function authHeader(token: string) {
  return {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  };
}

// ì¥ë°”êµ¬ë‹ˆ ì´ˆê¸°í™”
export async function clearCart(request: APIRequestContext, token: string) {
  await request.delete(`${API_BASE_URL}/carts`, {
    headers: authHeader(token)
  });
}

// ìŠ¤í¬ë¦°ìƒ· ì €ì¥ (PR ê²°ê³¼ìš©)
export async function saveScreenshot(page: Page, prFolder: string, name: string) {
  await page.screenshot({
    path: `../pr-results/${prFolder}/screenshots/${name}.png`,
    fullPage: true
  });
}
```

### API í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

**tests/cart/cart-api.spec.ts**:
```typescript
import { test, expect } from '@playwright/test';
import { API_BASE_URL, TEST_USER } from '../common/fixtures';
import { authHeader, clearCart } from '../common/helpers';

test.describe('ì¥ë°”êµ¬ë‹ˆ API í…ŒìŠ¤íŠ¸', () => {
  let authToken: string;

  test.beforeAll(async ({ request }) => {
    const response = await request.post(`${API_BASE_URL}/members/sign-in`, {
      data: {
        username: TEST_USER.username,
        password: TEST_USER.password
      }
    });
    const data = await response.json();
    authToken = data.accessToken;
  });

  test.beforeEach(async ({ request }) => {
    // ê° í…ŒìŠ¤íŠ¸ ì „ ì¥ë°”êµ¬ë‹ˆ ì´ˆê¸°í™”
    await clearCart(request, authToken);
  });

  test('@smoke @regression ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ', async ({ request }) => {
    const response = await request.get(`${API_BASE_URL}/carts`, {
      headers: authHeader(authToken)
    });

    expect(response.ok()).toBeTruthy();
    const data = await response.json();
    expect(data).toHaveProperty('cartProducts');
  });

  test('@regression ì¥ë°”êµ¬ë‹ˆ ìƒí’ˆ ì¶”ê°€', async ({ request }) => {
    const response = await request.post(`${API_BASE_URL}/carts`, {
      headers: authHeader(authToken),
      data: {
        productId: 1,
        quantity: 2
      }
    });

    expect(response.ok()).toBeTruthy();
  });

  test('@regression ë™ì¼ ìƒí’ˆ ì¶”ê°€ ì‹œ ìˆ˜ëŸ‰ ì¦ê°€', async ({ request }) => {
    // ì²« ë²ˆì§¸ ì¶”ê°€
    await request.post(`${API_BASE_URL}/carts`, {
      headers: authHeader(authToken),
      data: { productId: 1, quantity: 2 }
    });

    // ë‘ ë²ˆì§¸ ì¶”ê°€ (ê°™ì€ ìƒí’ˆ)
    await request.post(`${API_BASE_URL}/carts`, {
      headers: authHeader(authToken),
      data: { productId: 1, quantity: 3 }
    });

    // ìˆ˜ëŸ‰ í™•ì¸
    const response = await request.get(`${API_BASE_URL}/carts`, {
      headers: authHeader(authToken)
    });
    const data = await response.json();

    const product = data.cartProducts.find((p: any) => p.productId === 1);
    expect(product.quantity).toBe(5); // 2 + 3 = 5
  });

  test('@regression ì¸ì¦ ì—†ì´ ì ‘ê·¼ ì‹œ 401 ì˜¤ë¥˜', async ({ request }) => {
    const response = await request.get(`${API_BASE_URL}/carts`);
    expect(response.status()).toBe(401);
  });
});
```

### UI í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

**tests/auth/login.spec.ts**:
```typescript
import { test, expect } from '@playwright/test';
import { FRONTEND_URL, TEST_USER } from '../common/fixtures';

test.describe('ë¡œê·¸ì¸ UI í…ŒìŠ¤íŠ¸', () => {
  test('@smoke ë¡œê·¸ì¸ í˜ì´ì§€ ì ‘ê·¼', async ({ page }) => {
    await page.goto(`${FRONTEND_URL}/login`);

    await expect(page.locator('input[name="username"]')).toBeVisible();
    await expect(page.locator('input[name="password"]')).toBeVisible();
    await expect(page.locator('button[type="submit"]')).toBeVisible();
  });

  test('@regression ì •ìƒ ë¡œê·¸ì¸ í”Œë¡œìš°', async ({ page }) => {
    await page.goto(`${FRONTEND_URL}/login`);

    await page.fill('input[name="username"]', TEST_USER.username);
    await page.fill('input[name="password"]', TEST_USER.password);
    await page.click('button[type="submit"]');

    // ë¡œê·¸ì¸ ì„±ê³µ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ í™•ì¸
    await page.waitForURL(`${FRONTEND_URL}/`);

    // í† í° ì €ì¥ í™•ì¸
    const token = await page.evaluate(() => localStorage.getItem('access_token'));
    expect(token).toBeTruthy();
  });

  test('@regression ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ ì˜¤ë¥˜ ì²˜ë¦¬', async ({ page }) => {
    await page.goto(`${FRONTEND_URL}/login`);

    await page.fill('input[name="username"]', TEST_USER.username);
    await page.fill('input[name="password"]', 'wrong-password');
    await page.click('button[type="submit"]');

    // ì˜¤ë¥˜ ë©”ì‹œì§€ í™•ì¸
    await expect(page.locator('.error-message')).toBeVisible();
  });
});
```

---

## í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### ê¸°ë³¸ ì‹¤í–‰

```bash
cd regression-tests/playwright-tests

# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ë¸Œë¼ìš°ì € UI í‘œì‹œ)
npm test

# í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œë¡œ ì‹¤í–‰
npm run test:headless

# UI ëª¨ë“œë¡œ ì‹¤í–‰ (ì¸í„°ë™í‹°ë¸Œ)
npm run test:ui
```

### ê¸°ëŠ¥ë³„ ì‹¤í–‰

```bash
# ì¸ì¦ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:auth

# ì¥ë°”êµ¬ë‹ˆ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:cart

# ì£¼ë¬¸ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:order
```

### íƒœê·¸ë³„ ì‹¤í–‰

```bash
# Smoke í…ŒìŠ¤íŠ¸ë§Œ (ë¹ ë¥¸ ê²€ì¦)
npm run test:smoke

# ì „ì²´ Regression í…ŒìŠ¤íŠ¸
npm run test:regression

# íŠ¹ì • PR ê´€ë ¨ í…ŒìŠ¤íŠ¸ë§Œ
npx playwright test --grep @pr-123
```

### íŠ¹ì • íŒŒì¼/í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# íŠ¹ì • íŒŒì¼ë§Œ ì‹¤í–‰
npx playwright test tests/cart/cart-api.spec.ts

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ ì´ë¦„ìœ¼ë¡œ)
npx playwright test -g "ì¥ë°”êµ¬ë‹ˆ ìƒí’ˆ ì¶”ê°€"
```

---

## í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê´€ë¦¬

### ì»¤ë²„ë¦¬ì§€ í˜„í™© ì¶”ì 

**coverage-reports/coverage-summary.md** í…œí”Œë¦¿:
```markdown
# í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í˜„í™©

## ìµœì¢… ì—…ë°ì´íŠ¸: YYYY-MM-DD

### ê¸°ëŠ¥ë³„ ì»¤ë²„ë¦¬ì§€

| ê¸°ëŠ¥ | í…ŒìŠ¤íŠ¸ ìˆ˜ | í†µê³¼ | ì‹¤íŒ¨ | ì»¤ë²„ë¦¬ì§€ |
|------|----------|------|------|----------|
| ì¸ì¦ (auth) | 5 | 5 | 0 | 100% |
| ì¥ë°”êµ¬ë‹ˆ (cart) | 8 | 8 | 0 | 100% |
| ì£¼ë¬¸ (order) | 6 | 5 | 1 | 83% |
| ìƒí’ˆ (product) | 4 | 4 | 0 | 100% |
| ì¿ í° (coupon) | 3 | 3 | 0 | 100% |

**ì´ í…ŒìŠ¤íŠ¸**: 26ê°œ
**ì „ì²´ í†µê³¼ìœ¨**: 96%

### API ì—”ë“œí¬ì¸íŠ¸ ì»¤ë²„ë¦¬ì§€

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | í…ŒìŠ¤íŠ¸ ì—¬ë¶€ |
|-----------|--------|------------|
| /members/sign-in | POST | âœ… |
| /members/join | POST | âœ… |
| /carts | GET | âœ… |
| /carts | POST | âœ… |
| /carts | DELETE | âœ… |
| /orders/place-order | POST | âœ… |
| /orders/my-order | GET | âœ… |
| /products | GET | âœ… |
| /user-coupons | DELETE | â¬œ |

### ë¯¸í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥
- [ ] ì¿ í° ì‚¬ìš© (DELETE /user-coupons)
- [ ] ì£¼ë¬¸ ì·¨ì†Œ í›„ í™˜ë¶ˆ ì²˜ë¦¬
- [ ] íšŒì› íƒˆí‡´

### ìµœê·¼ ì¶”ê°€ëœ í…ŒìŠ¤íŠ¸
- 2026-01-09: ì¥ë°”êµ¬ë‹ˆ ë™ì¼ ìƒí’ˆ ìˆ˜ëŸ‰ ì¦ê°€ í…ŒìŠ¤íŠ¸ (PR #1)
- 2026-01-08: ë¡œê·¸ì¸ JWT í† í° ê²€ì¦ í…ŒìŠ¤íŠ¸
```

### PR í…ŒìŠ¤íŠ¸ë¥¼ í†µí•© ìŠ¤ìœ„íŠ¸ì— ë³‘í•©í•˜ê¸°

PR í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„, ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•© ìŠ¤ìœ„íŠ¸ì— ë³‘í•©í•©ë‹ˆë‹¤:

```bash
# 1. PRë³„ í…ŒìŠ¤íŠ¸ í™•ì¸
cat pr-results/ì¥ë°”êµ¬ë‹ˆ-ë¦¬íŒ©í† ë§/playwright-tests/tests/cart-api.spec.ts

# 2. í†µí•© ìŠ¤ìœ„íŠ¸ì˜ ì ì ˆí•œ ìœ„ì¹˜ì— ë³‘í•©
# - ìƒˆ ê¸°ëŠ¥: ìƒˆ íŒŒì¼ ìƒì„±
# - ê¸°ì¡´ ê¸°ëŠ¥ í™•ì¥: ê¸°ì¡´ íŒŒì¼ì— í…ŒìŠ¤íŠ¸ ì¶”ê°€

# 3. ê³µí†µ ìœ í‹¸ë¦¬í‹° í™œìš©í•˜ë„ë¡ import ìˆ˜ì •
# ì˜ˆ: import { test, expect } from '../common/fixtures';

# 4. íƒœê·¸ ì¶”ê°€
# @regression íƒœê·¸ ì¶”ê°€í•˜ì—¬ ì „ì²´ ë¦¬ê·¸ë ˆì…˜ì— í¬í•¨

# 5. ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰í•˜ì—¬ ê²€ì¦
npm run test:regression
```

### ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ ìƒì„±

```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ë¦¬í¬íŠ¸ ìƒì„±
npm run test:ci

# ë¦¬í¬íŠ¸ í™•ì¸
npm run report

# ë‚ ì§œë³„ ë¦¬í¬íŠ¸ ë³´ê´€
mkdir -p ../coverage-reports/$(date +%Y-%m-%d)
cp -r ../coverage-reports/latest/* ../coverage-reports/$(date +%Y-%m-%d)/
```

---

## CI/CD ì—°ë™

### GitHub Actions ì˜ˆì‹œ

**.github/workflows/e2e-tests.yml**:
```yaml
name: E2E Tests

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      mysql:
        image: mysql:8.0
        env:
          MYSQL_ROOT_PASSWORD: ${{ secrets.MYSQL_ROOT_PASSWORD }}
          MYSQL_DATABASE: ddd_start
        ports:
          - 3306:3306
        options: >-
          --health-cmd="mysqladmin ping"
          --health-interval=10s
          --health-timeout=5s
          --health-retries=3

    steps:
      - uses: actions/checkout@v4

      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'

      - name: Build Backend
        run: ./gradlew build -x test

      - name: Start Backend
        run: |
          ./gradlew bootRun &
          sleep 30  # ì„œë²„ ì‹œì‘ ëŒ€ê¸°
        env:
          MYSQL_ROOT_PASSWORD: ${{ secrets.MYSQL_ROOT_PASSWORD }}
          JWT_SECRET: ${{ secrets.JWT_SECRET }}

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: Install Playwright
        working-directory: ./regression-tests/playwright-tests
        run: |
          npm ci
          npx playwright install --with-deps

      - name: Run E2E Tests
        working-directory: ./regression-tests/playwright-tests
        run: npm run test:ci
        env:
          CI: true
          API_URL: http://localhost:8080

      - name: Upload Test Results
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: playwright-report
          path: regression-tests/coverage-reports/latest/
          retention-days: 30
```

### PR í…ŒìŠ¤íŠ¸ ìë™í™”

**.github/workflows/pr-regression.yml**:
```yaml
name: PR Regression Test

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  regression:
    runs-on: ubuntu-latest

    steps:
      # ... (ë°±ì—”ë“œ ì„¤ì • ë™ì¼)

      - name: Run Smoke Tests
        working-directory: ./regression-tests/playwright-tests
        run: npm run test:smoke

      - name: Comment PR with Results
        uses: actions/github-script@v7
        if: always()
        with:
          script: |
            const fs = require('fs');
            const results = JSON.parse(
              fs.readFileSync('regression-tests/coverage-reports/latest/results.json')
            );

            const passed = results.suites.reduce((acc, s) =>
              acc + s.specs.filter(spec => spec.ok).length, 0);
            const total = results.suites.reduce((acc, s) =>
              acc + s.specs.length, 0);

            const body = `## ğŸ§ª ë¦¬ê·¸ë ˆì…˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼

            **ê²°ê³¼**: ${passed}/${total} í†µê³¼ (${Math.round(passed/total*100)}%)

            ìì„¸í•œ ë‚´ìš©ì€ Actions ì•„í‹°íŒ©íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.`;

            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: body
            });
```

---

## ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. í…ŒìŠ¤íŠ¸ ë…ë¦½ì„± ìœ ì§€
```typescript
test.beforeEach(async ({ request }) => {
  // ê° í…ŒìŠ¤íŠ¸ ì „ ìƒíƒœ ì´ˆê¸°í™”
  await clearCart(request, authToken);
});

test.afterEach(async ({ page }) => {
  // ê° í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬
  await page.evaluate(() => localStorage.clear());
});
```

### 2. ëª…í™•í•œ í…ŒìŠ¤íŠ¸ ì´ë¦„
```typescript
// ì¢‹ì€ ì˜ˆ
test('ì¥ë°”êµ¬ë‹ˆì— ë™ì¼ ìƒí’ˆ ì¶”ê°€ ì‹œ ê¸°ì¡´ í•­ëª©ì˜ ìˆ˜ëŸ‰ì´ ì¦ê°€í•´ì•¼ í•¨', async () => {});

// ë‚˜ìœ ì˜ˆ
test('í…ŒìŠ¤íŠ¸ 1', async () => {});
```

### 3. Given-When-Then íŒ¨í„´
```typescript
test('ì£¼ë¬¸ ìƒì„± í…ŒìŠ¤íŠ¸', async ({ request }) => {
  // Given: ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì´ ìˆëŠ” ìƒíƒœ
  await request.post(`${API_BASE_URL}/carts`, {
    headers: authHeader(authToken),
    data: { productId: 1, quantity: 2 }
  });

  // When: ì£¼ë¬¸ ìƒì„± ìš”ì²­
  const response = await request.post(`${API_BASE_URL}/orders/place-order`, {
    headers: authHeader(authToken),
    data: {
      shippingInfo: { /* ... */ },
      paymentInfo: { /* ... */ }
    }
  });

  // Then: ì£¼ë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë¨
  expect(response.ok()).toBeTruthy();
  const order = await response.json();
  expect(order.orderNumber).toBeDefined();
});
```

### 4. ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í—¬í¼ í•¨ìˆ˜
```typescript
// ë°˜ë³µë˜ëŠ” ë¡œì§ì€ í—¬í¼ë¡œ ì¶”ì¶œ
export async function createTestOrder(request: APIRequestContext, token: string) {
  await request.post(`${API_BASE_URL}/carts`, {
    headers: authHeader(token),
    data: { productId: 1, quantity: 1 }
  });

  return await request.post(`${API_BASE_URL}/orders/place-order`, {
    headers: authHeader(token),
    data: { /* ê¸°ë³¸ ì£¼ë¬¸ ì •ë³´ */ }
  });
}
```

### 5. ì ì ˆí•œ ëŒ€ê¸° ì „ëµ
```typescript
// ì¢‹ì€ ì˜ˆ: íŠ¹ì • ì¡°ê±´ì„ ê¸°ë‹¤ë¦¼
await page.waitForSelector('.order-success');
await expect(page.locator('.order-number')).toBeVisible();

// ë‚˜ìœ ì˜ˆ: ê³ ì • ì‹œê°„ ëŒ€ê¸°
await page.waitForTimeout(5000);
```

### 6. í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬
```typescript
// tests/common/test-data.ts
export const TEST_PRODUCTS = {
  BASIC: { id: 1, name: 'ê¸°ë³¸ ìƒí’ˆ', price: 10000 },
  EXPENSIVE: { id: 2, name: 'ê³ ê°€ ìƒí’ˆ', price: 100000 },
};

export const TEST_ADDRESSES = {
  SEOUL: {
    address: 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬',
    detailedAddress: '101ë™ 101í˜¸',
    zipCode: '12345'
  }
};
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. í…ŒìŠ¤íŠ¸ ê°„ ë°ì´í„° ì¶©ëŒ

**ì¦ìƒ**: í…ŒìŠ¤íŠ¸ê°€ ê°œë³„ ì‹¤í–‰ ì‹œ í†µê³¼í•˜ì§€ë§Œ ì „ì²´ ì‹¤í–‰ ì‹œ ì‹¤íŒ¨

**í•´ê²°ë°©ë²•**:
```typescript
// ê° í…ŒìŠ¤íŠ¸ ì „/í›„ ë°ì´í„° ì •ë¦¬
test.beforeEach(async ({ request }) => {
  await clearCart(request, authToken);
});

// ë˜ëŠ” ê³ ìœ í•œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì‚¬ìš©
const uniqueUsername = `test_${Date.now()}`;
```

### 2. ì¸ì¦ í† í° ë§Œë£Œ

**ì¦ìƒ**: ì¥ì‹œê°„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ 401 ì˜¤ë¥˜ ë°œìƒ

**í•´ê²°ë°©ë²•**:
```typescript
// í† í° ê°±ì‹  ë¡œì§ ì¶”ê°€
test.beforeAll(async ({ request }) => {
  authToken = await login(request);
});

// ë˜ëŠ” ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ìƒˆ í† í° íšë“
test.beforeEach(async ({ request }) => {
  authToken = await login(request);
});
```

### 3. ë³‘ë ¬ ì‹¤í–‰ ì‹œ ì¶©ëŒ

**ì¦ìƒ**: `fullyParallel: true` ì„¤ì • ì‹œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

**í•´ê²°ë°©ë²•**:
```typescript
// playwright.config.ts
export default defineConfig({
  // íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ ìˆœì°¨ ì‹¤í–‰
  projects: [
    {
      name: 'sequential',
      testMatch: /.*order.*.spec.ts/,
      fullyParallel: false,
    },
    {
      name: 'parallel',
      testIgnore: /.*order.*.spec.ts/,
      fullyParallel: true,
    },
  ],
});
```

### 4. í™˜ê²½ë³„ URL ë¬¸ì œ

**ì¦ìƒ**: ë¡œì»¬/CI í™˜ê²½ì—ì„œ ë‹¤ë¥¸ URL ì‚¬ìš© í•„ìš”

**í•´ê²°ë°©ë²•**:
```typescript
// í™˜ê²½ ë³€ìˆ˜ í™œìš©
export const API_BASE_URL = process.env.API_URL || 'http://localhost:8080';
export const FRONTEND_URL = process.env.FRONTEND_URL || 'http://localhost:3000';

// ì‹¤í–‰ ì‹œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
// API_URL=http://staging.api.com npm test
```

### 5. ìŠ¤í¬ë¦°ìƒ· ì €ì¥ ì‹¤íŒ¨

**ì¦ìƒ**: ìŠ¤í¬ë¦°ìƒ· ê²½ë¡œ ì˜¤ë¥˜

**í•´ê²°ë°©ë²•**:
```typescript
import path from 'path';

// ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš©
await page.screenshot({
  path: path.join(__dirname, '../../pr-results/screenshots/test.png')
});
```

---

## ì°¸ê³  ìë£Œ

### ê´€ë ¨ ë¬¸ì„œ
- [PR-ë¦¬ê·¸ë ˆì…˜-í…ŒìŠ¤íŠ¸-ì›Œí¬í”Œë¡œìš°.md](./PR-ë¦¬ê·¸ë ˆì…˜-í…ŒìŠ¤íŠ¸-ì›Œí¬í”Œë¡œìš°.md) - PR ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í”„ë¡œì„¸ìŠ¤
- [CLAUDE.md](./CLAUDE.md) - í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ê°€ì´ë“œ

### Playwright ê³µì‹ ë¬¸ì„œ
- [Playwright ê³µì‹ ë¬¸ì„œ](https://playwright.dev/)
- [Best Practices](https://playwright.dev/docs/best-practices)
- [Test Configuration](https://playwright.dev/docs/test-configuration)
- [CI/CD Integration](https://playwright.dev/docs/ci)

---

## ë¬¸ì„œ ë²„ì „ ê´€ë¦¬

- **v1.0** (2026-01-09): ì´ˆê¸° ë¬¸ì„œ ì‘ì„±
  - í†µí•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ êµ¬ì¡° ì •ì˜
  - í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ ë° ì˜ˆì‹œ ì¶”ê°€
  - ì»¤ë²„ë¦¬ì§€ ê´€ë¦¬ ë°©ë²• ì¶”ê°€
  - CI/CD ì—°ë™ ê°€ì´ë“œ ì¶”ê°€
  - ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ë° íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì¶”ê°€
